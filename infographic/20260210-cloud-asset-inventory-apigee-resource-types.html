<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cloud Asset Inventory: Apigee リソースタイプのサポート追加</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap');

    :root {
      --gc-blue: #4285F4;
      --gc-red: #EA4335;
      --gc-yellow: #FBBC04;
      --gc-green: #34A853;
      --gc-blue-900: #174EA6;
      --gc-blue-800: #185ABC;
      --gc-blue-700: #1967D2;
      --gc-blue-600: #1A73E8;
      --gc-blue-500: #4285F4;
      --gc-blue-300: #669DF6;
      --gc-blue-200: #8AB4F8;
      --gc-blue-100: #AECBFA;
      --gc-blue-50: #E8F0FE;
      --gc-on-surface: #202124;
      --gc-on-surface-variant: #5F6368;
      --gc-outline: #80868B;
      --gc-surface: #FFFFFF;
      --gc-surface-container-lowest: #F8F9FA;
      --gc-surface-container-low: #F1F3F4;
      --gc-surface-container: #E8EAED;
      --gc-outline-variant: #DADCE0;
      --gc-blue-tint: #E8F0FE;
      --gc-green-tint: #E6F4EA;
      --gc-red-tint: #FCE8E6;
      --gc-yellow-tint: #FEF7E0;
      --gc-purple-tint: #F3E8FD;
      --gc-teal-tint: #E0F7FA;
      --gc-purple: #A142F4;
      --gc-teal: #00BCD4;
      --gc-orange: #FF6D00;
    }

    * { box-sizing: border-box; }

    body {
      background-color: var(--gc-surface);
      font-family: 'Google Sans', 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
      color: var(--gc-on-surface-variant);
      font-size: 16px;
      line-height: 1.7;
      padding: 20px;
      margin: 0;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      width: 100%;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 32px;
      flex-wrap: wrap;
      padding-bottom: 16px;
      border-bottom: 3px solid var(--gc-blue-600);
    }

    .header-left { flex: 1; min-width: 280px; }

    h1 {
      font-size: 32px;
      font-weight: 700;
      color: var(--gc-on-surface);
      margin: 0 0 8px 0;
      line-height: 1.3;
    }

    h2 {
      font-size: 24px;
      font-weight: 600;
      color: var(--gc-on-surface);
      margin: 0 0 16px 0;
      display: flex;
      align-items: center;
      gap: 8px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--gc-blue-600);
    }

    h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--gc-on-surface);
      margin: 16px 0 8px 0;
    }

    .subtitle {
      font-size: 16px;
      color: var(--gc-outline);
      text-align: right;
      white-space: nowrap;
      padding-top: 4px;
    }

    .section {
      background: var(--gc-surface-container-low);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      border: 1px solid var(--gc-outline-variant);
    }

    .highlight {
      background-color: var(--gc-blue-50);
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: 600;
      color: var(--gc-blue-800);
      border-bottom: 2px solid var(--gc-blue-600);
    }

    .badge,
    .badge-ga,
    .badge-preview,
    .badge-deprecated {
      display: inline-block;
      color: #FFFFFF;
      padding: 4px 12px;
      border-radius: 16px;
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.25px;
      margin: 4px 8px 4px 0;
    }

    .badge { background: var(--gc-blue-600); }
    .badge-ga { background: var(--gc-green); color: #FFFFFF; }
    .badge-preview { background: var(--gc-orange); color: #FFFFFF; }

    .card {
      background: var(--gc-surface);
      border-radius: 12px;
      padding: 20px;
      margin: 12px 0;
      border-left: 4px solid var(--gc-blue-600);
      box-shadow: 0 1px 3px rgba(60, 64, 67, 0.12), 0 1px 2px rgba(60, 64, 67, 0.08);
    }

    .card h4 {
      margin: 0 0 8px 0;
      color: var(--gc-on-surface);
      font-size: 16px;
      font-weight: 600;
    }

    .card p {
      margin: 0;
      font-size: 14px;
    }

    .icon-text {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin: 8px 0;
      color: var(--gc-on-surface-variant);
    }

    .arrow { color: var(--gc-blue-600); font-size: 20px; }

    .gc-link { color: var(--gc-blue-600); text-decoration: none; }
    .gc-link:hover { color: var(--gc-blue-800); text-decoration: underline; }

    /* Before/After */
    .before-after-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin: 16px 0;
    }

    .before-box {
      background: var(--gc-red-tint);
      border-left: 4px solid var(--gc-red);
      border-radius: 0 12px 12px 0;
      padding: 16px 20px;
    }

    .before-box h4 { color: var(--gc-red); margin: 0 0 8px 0; font-size: 15px; }

    .after-box {
      background: var(--gc-green-tint);
      border-left: 4px solid var(--gc-green);
      border-radius: 0 12px 12px 0;
      padding: 16px 20px;
    }

    .after-box h4 { color: var(--gc-green); margin: 0 0 8px 0; font-size: 15px; }

    .before-box ul, .after-box ul {
      margin: 0;
      padding-left: 18px;
      font-size: 14px;
      line-height: 1.6;
    }

    /* Statistics cards */
    .stat-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin: 16px 0;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--gc-blue-600), var(--gc-blue-800));
      color: var(--gc-surface);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
    }

    .stat-value {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 14px;
      opacity: 0.9;
    }

    /* Mermaid */
    .mermaid-container {
      background: #FFFFFF;
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      border: 2px solid rgba(66, 133, 244, 0.3);
      overflow-x: auto;
    }

    .mermaid {
      display: flex;
      justify-content: center;
    }

    /* Tables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid var(--gc-outline-variant);
    }

    th {
      background: var(--gc-blue-50);
      color: var(--gc-blue-900);
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 14px;
      border-bottom: 2px solid var(--gc-blue-200);
    }

    td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--gc-outline-variant);
      font-size: 14px;
    }

    tr:nth-child(even) { background: var(--gc-surface-container-lowest); }
    tr:hover { background: var(--gc-blue-50); }

    /* Note/Warning boxes */
    .note-box {
      background: var(--gc-blue-tint);
      border-left: 4px solid var(--gc-blue-600);
      padding: 16px 20px;
      border-radius: 0 12px 12px 0;
      margin: 16px 0;
    }

    .warning-box {
      background: var(--gc-yellow-tint);
      border-left: 4px solid var(--gc-yellow);
      padding: 16px 20px;
      border-radius: 0 12px 12px 0;
      margin: 16px 0;
    }

    .success-box {
      background: var(--gc-green-tint);
      border-left: 4px solid var(--gc-green);
      padding: 16px 20px;
      border-radius: 0 12px 12px 0;
      margin: 16px 0;
    }

    /* Code blocks */
    .code-block {
      background: #1E1E1E;
      border-radius: 8px;
      overflow: hidden;
      margin: 16px 0;
    }

    .code-header {
      background: #2D2D2D;
      padding: 8px 16px;
      display: flex;
      justify-content: space-between;
      font-size: 12px;
    }

    .code-lang {
      color: #9CDCFE;
      font-weight: bold;
    }

    .code-title {
      color: #AAAAAA;
    }

    .code-block pre {
      margin: 0;
      padding: 0;
      overflow-x: auto;
      background: #1E1E1E;
      border-radius: 0;
    }

    .code-block code {
      font-family: 'Roboto Mono', 'Source Code Pro', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
      padding: 16px !important;
    }

    pre:not(.mermaid) {
      background: #1E1E1E;
      border-radius: 8px;
      padding: 16px;
      font-family: 'Roboto Mono', 'Source Code Pro', 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
      overflow-x: auto;
      color: #E8E8E8;
      margin: 16px 0;
    }

    pre code {
      background: none;
      border: none;
      padding: 0;
      font-size: inherit;
      color: inherit;
    }

    code:not(pre code) {
      background: var(--gc-surface-container-low);
      border: 1px solid var(--gc-outline-variant);
      border-radius: 4px;
      padding: 2px 6px;
      font-family: 'Roboto Mono', 'Source Code Pro', 'Courier New', monospace;
      font-size: 0.85em;
      color: var(--gc-blue-900);
    }

    /* Use case cards */
    .usecase-card {
      background: var(--gc-blue-tint);
      border-radius: 12px;
      padding: 20px;
      margin: 12px 0;
      border: 1px solid var(--gc-blue-200);
    }

    .usecase-card h4 {
      color: var(--gc-blue-900);
      margin: 0 0 8px 0;
      font-size: 16px;
    }

    .usecase-card p {
      margin: 0 0 8px 0;
      font-size: 14px;
    }

    .usecase-card .effect {
      background: var(--gc-green-tint);
      border-radius: 8px;
      padding: 10px 14px;
      font-size: 13px;
      margin-top: 10px;
      border-left: 3px solid var(--gc-green);
    }

    /* Feature cards grid */
    .feature-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 16px 0;
    }

    .feature-card {
      background: var(--gc-surface);
      border-radius: 12px;
      padding: 16px;
      border-left: 4px solid var(--gc-blue-600);
      box-shadow: 0 1px 3px rgba(60, 64, 67, 0.12);
    }

    .feature-card.green { border-left-color: var(--gc-green); }
    .feature-card.orange { border-left-color: var(--gc-orange); }
    .feature-card.teal { border-left-color: var(--gc-teal); }
    .feature-card.purple { border-left-color: var(--gc-purple); }

    .feature-card h4 {
      margin: 0 0 6px 0;
      color: var(--gc-on-surface);
      font-size: 15px;
    }

    .feature-card p {
      margin: 0;
      font-size: 13px;
      line-height: 1.5;
    }

    /* Merit/Demerit */
    .merit-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin: 16px 0;
    }

    .merit-box {
      background: var(--gc-green-tint);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid rgba(52, 168, 83, 0.3);
    }

    .merit-box h4 { color: var(--gc-green); margin: 0 0 10px 0; }

    .demerit-box {
      background: var(--gc-yellow-tint);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid rgba(251, 188, 4, 0.3);
    }

    .demerit-box h4 { color: #E37400; margin: 0 0 10px 0; }

    .merit-box ul, .demerit-box ul {
      margin: 0;
      padding-left: 18px;
      font-size: 14px;
      line-height: 1.7;
    }

    /* Footer */
    footer {
      margin-top: 32px;
      padding-top: 16px;
      border-top: 1px solid var(--gc-outline-variant);
      font-size: 12px;
      color: var(--gc-outline);
    }

    footer a {
      color: var(--gc-blue-600);
      text-decoration: none;
      word-break: break-all;
    }

    footer a:hover { text-decoration: underline; }

    footer ul {
      margin: 8px 0;
      padding-left: 18px;
      line-height: 1.8;
    }

    /* Responsive */
    @media (max-width: 768px) {
      h1 { font-size: 24px; }
      .header { flex-direction: column; }
      .subtitle { text-align: left; margin-top: 8px; }
      .before-after-grid,
      .feature-grid,
      .merit-grid { grid-template-columns: 1fr; }
      .stat-grid { grid-template-columns: 1fr 1fr; }
      body { padding: 12px; }
      .section { padding: 16px; }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
</head>
<body>
  <div class="container">

    <!-- Header -->
    <div class="header">
      <div class="header-left">
        <h1>&#9729;&#65039; Cloud Asset Inventory: Apigee リソースタイプのサポート追加</h1>
        <div style="margin-top: 8px;">
          <span class="badge">Cloud Asset Inventory</span>
          <span class="badge" style="background: var(--gc-teal);">Apigee</span>
          <span class="badge badge-ga">GA</span>
        </div>
      </div>
      <div class="subtitle">&#128197; 2026-02-10</div>
    </div>

    <!-- Statistics -->
    <div class="stat-grid">
      <div class="stat-card">
        <div class="stat-value">3</div>
        <div class="stat-label">新規リソースタイプ</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">7</div>
        <div class="stat-label">対応 API 数</div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, var(--gc-green), #2E7D32);">
        <div class="stat-value">5</div>
        <div class="stat-label">Apigee 全対応リソース</div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, #00897B, #00695C);">
        <div class="stat-value">35日</div>
        <div class="stat-label">変更履歴保持期間</div>
      </div>
    </div>

    <!-- Overview -->
    <div class="section">
      <h2>&#128196; 概要</h2>
      <p>Cloud Asset Inventory において、Apigee の <span class="highlight">3 つのリソースタイプ</span>が新たに公開サポートされた。対象は <code>apigee.googleapis.com/ApiProxy</code>、<code>apigee.googleapis.com/ApiProxyRevision</code>、<code>apigee.googleapis.com/Environment</code> であり、ExportAssets、ListAssets、BatchGetAssetsHistory、QueryAssets、Feed、SearchAllResources、SearchAllIamPolicies の<span class="highlight">全 7 つの API</span> で利用可能となった。</p>
      <p style="margin-top: 12px;">Cloud Asset Inventory は Google Cloud のグローバルメタデータインベントリサービスであり、クラウドリソースのメタデータの表示、検索、エクスポート、監視、分析を一元的に行うことができる。今回のアップデートにより、Apigee の API プロキシ管理に関わるリソースを Cloud Asset Inventory の統合管理基盤で可視化・追跡できるようになった。</p>
      <p style="margin-top: 12px;">このアップデートは、Apigee を利用して API 管理を行っている組織の <strong>Solutions Architect</strong>、<strong>セキュリティエンジニア</strong>、<strong>プラットフォームエンジニア</strong>にとって特に有用である。</p>
    </div>

    <!-- Before/After -->
    <div class="section">
      <h2>&#128260; Before / After</h2>
      <div class="before-after-grid">
        <div class="before-box">
          <h4>&#10060; アップデート前の課題</h4>
          <ul>
            <li>ApiProxy、ApiProxyRevision、Environment は Cloud Asset Inventory の主要 API で公開サポートされていなかった</li>
            <li>Apigee リソースの変更履歴を Cloud Asset Inventory 経由で追跡できなかった</li>
            <li>組織全体のリソースインベントリに Apigee の API プロキシ情報を含めた一元管理が困難だった</li>
            <li>API プロキシの IAM ポリシーを SearchAllIamPolicies で横断検索できなかった</li>
          </ul>
        </div>
        <div class="after-box">
          <h4>&#9989; アップデート後の改善</h4>
          <ul>
            <li>ApiProxy、ApiProxyRevision、Environment を全 7 API で利用可能に</li>
            <li>Pub/Sub フィードを通じて Apigee リソースの変更をリアルタイムに監視可能に</li>
            <li>BigQuery や Cloud Storage へのエクスポートで分析基盤に統合可能に</li>
            <li>SearchAllResources / SearchAllIamPolicies で横断検索可能に</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Architecture Diagram -->
    <div class="section">
      <h2>&#128421;&#65039; アーキテクチャ図</h2>
      <p>Cloud Asset Inventory が Apigee の 3 つのリソースタイプからメタデータを収集し、各 API を通じて BigQuery、Cloud Storage、Pub/Sub、Google Cloud Console などに出力・連携する構成。</p>
      <div class="mermaid-container">
        <pre class="mermaid">
flowchart TD
    subgraph Apigee["Apigee API Management"]
        AP["API Proxy\napigee.googleapis.com/ApiProxy"]
        APR["API Proxy Revision\napigee.googleapis.com/ApiProxyRevision"]
        ENV["Environment\napigee.googleapis.com/Environment"]
    end

    subgraph CAI["Cloud Asset Inventory"]
        EA["ExportAssets"]
        LA["ListAssets"]
        BH["BatchGetAssetsHistory"]
        QA["QueryAssets"]
        FD["Feed (Pub/Sub)"]
        SR["SearchAllResources"]
        SIP["SearchAllIamPolicies"]
    end

    subgraph Destinations["出力先 / 連携先"]
        BQ[("BigQuery")]
        GCS[("Cloud Storage")]
        PS["Pub/Sub"]
        CON["Google Cloud Console"]
    end

    AP --> CAI
    APR --> CAI
    ENV --> CAI

    EA --> BQ
    EA --> GCS
    QA --> BQ
    FD --> PS
    SR --> CON
    SIP --> CON
    LA --> CON
        </pre>
      </div>
    </div>

    <!-- Key Features -->
    <div class="section">
      <h2>&#9889; 主要機能</h2>

      <h3>&#128204; サポート対象リソースタイプ</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <h4>&#128268; ApiProxy</h4>
          <p><code>apigee.googleapis.com/ApiProxy</code><br/>Apigee 組織内の API プロキシリソース</p>
        </div>
        <div class="feature-card teal">
          <h4>&#128196; ApiProxyRevision</h4>
          <p><code>apigee.googleapis.com/ApiProxyRevision</code><br/>API プロキシの各リビジョン</p>
        </div>
        <div class="feature-card green">
          <h4>&#127760; Environment</h4>
          <p><code>apigee.googleapis.com/Environment</code><br/>API プロキシのデプロイ先となる環境リソース</p>
        </div>
        <div class="feature-card purple">
          <h4>&#128203; 既存サポート</h4>
          <p><code>Instance</code> と <code>Organization</code> は既にサポート済み。これで Apigee 主要 5 リソース全対応。</p>
        </div>
      </div>

      <h3>&#128295; 対応 API (全 7 種)</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px;">
        <div class="card" style="margin: 0; padding: 14px;">
          <h4 style="font-size: 14px;">&#128229; ExportAssets</h4>
          <p style="font-size: 13px;">BigQuery / Cloud Storage へエクスポート</p>
        </div>
        <div class="card" style="margin: 0; padding: 14px;">
          <h4 style="font-size: 14px;">&#128203; ListAssets</h4>
          <p style="font-size: 13px;">プロジェクト/フォルダ/組織内のアセット一覧</p>
        </div>
        <div class="card" style="margin: 0; padding: 14px;">
          <h4 style="font-size: 14px;">&#128337; BatchGetAssetsHistory</h4>
          <p style="font-size: 13px;">最大 35 日間のアセット変更履歴を取得</p>
        </div>
        <div class="card" style="margin: 0; padding: 14px;">
          <h4 style="font-size: 14px;">&#128270; QueryAssets</h4>
          <p style="font-size: 13px;">BigQuery SQL を使用したアセットクエリ</p>
        </div>
        <div class="card" style="margin: 0; padding: 14px;">
          <h4 style="font-size: 14px;">&#128276; Feed</h4>
          <p style="font-size: 13px;">Pub/Sub を通じたリアルタイム変更監視</p>
        </div>
        <div class="card" style="margin: 0; padding: 14px;">
          <h4 style="font-size: 14px;">&#128269; SearchAllResources</h4>
          <p style="font-size: 13px;">カスタムクエリによるリソース検索</p>
        </div>
        <div class="card" style="margin: 0; padding: 14px; grid-column: span 2;">
          <h4 style="font-size: 14px;">&#128272; SearchAllIamPolicies</h4>
          <p style="font-size: 13px;">IAM 許可ポリシーの横断検索</p>
        </div>
      </div>
    </div>

    <!-- Technical Specifications -->
    <div class="section">
      <h2>&#128203; 技術仕様</h2>

      <h3>&#128205; サポートされる Apigee リソースタイプ一覧</h3>
      <div style="overflow-x: auto;">
        <table>
          <thead>
            <tr>
              <th>リソースタイプ</th>
              <th>アセット名形式</th>
              <th>Effective Tags</th>
              <th>Analysis API</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>apigee.googleapis.com/ApiProxy</code></td>
              <td style="font-size: 12px;"><code>//apigee.googleapis.com/organizations/{ORG}/apis/{API_PROXY}</code></td>
              <td style="text-align: center;">&#10060; 非対応</td>
              <td style="text-align: center;">&#10060; 非対応</td>
            </tr>
            <tr>
              <td><code>apigee.googleapis.com/ApiProxyRevision</code></td>
              <td style="font-size: 12px;"><code>//apigee.googleapis.com/organizations/{ORG}/apis/{API_PROXY}/revisions/{REV}</code></td>
              <td style="text-align: center;">&#10060; 非対応</td>
              <td style="text-align: center;">&#10060; 非対応</td>
            </tr>
            <tr>
              <td><code>apigee.googleapis.com/Environment</code></td>
              <td style="font-size: 12px;"><code>//apigee.googleapis.com/organizations/{ORG}/environments/{ENV}</code></td>
              <td style="text-align: center;">&#10060; 非対応</td>
              <td style="text-align: center;">&#10060; 非対応</td>
            </tr>
            <tr>
              <td><code>apigee.googleapis.com/Instance</code> (既存)</td>
              <td style="font-size: 12px;"><code>//apigee.googleapis.com/organizations/{ORG}/instances/{INSTANCE}</code></td>
              <td style="text-align: center;">&#10060; 非対応</td>
              <td style="text-align: center;">&#9989; 対応</td>
            </tr>
            <tr>
              <td><code>apigee.googleapis.com/Organization</code> (既存)</td>
              <td style="font-size: 12px;"><code>//apigee.googleapis.com/organizations/{ORG}</code></td>
              <td style="text-align: center;">&#10060; 非対応</td>
              <td style="text-align: center;">&#9989; 対応</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>&#128274; 必要な権限</h3>
      <table>
        <thead>
          <tr>
            <th>操作</th>
            <th>必要な権限</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ExportAssets / BatchGetAssetsHistory</td>
            <td><code>cloudasset.assets.exportResource</code></td>
          </tr>
          <tr>
            <td>ListAssets</td>
            <td><code>cloudasset.assets.listResource</code></td>
          </tr>
          <tr>
            <td>QueryAssets</td>
            <td><code>cloudasset.assets.queryResource</code></td>
          </tr>
          <tr>
            <td>Feed (作成)</td>
            <td><code>cloudasset.feeds.create</code> + <code>cloudasset.assets.exportResource</code></td>
          </tr>
          <tr>
            <td>SearchAllResources</td>
            <td><code>cloudasset.assets.searchAllResources</code></td>
          </tr>
          <tr>
            <td>SearchAllIamPolicies</td>
            <td><code>cloudasset.assets.searchAllIamPolicies</code></td>
          </tr>
        </tbody>
      </table>
      <div class="note-box">
        <strong>&#128161; 注意:</strong> 全ての Cloud Asset Inventory API 呼び出しには、共通で <code>serviceusage.services.use</code> 権限も必要となる。
      </div>
    </div>

    <!-- Setup Guide -->
    <div class="section">
      <h2>&#128736;&#65039; 設定方法</h2>

      <h3>前提条件</h3>
      <div style="margin: 12px 0;">
        <div class="icon-text"><span>&#9989;</span> Cloud Asset API が有効化されていること</div>
        <div class="icon-text"><span>&#9989;</span> 適切な IAM ロール (例: <code>roles/cloudasset.viewer</code>) が付与されていること</div>
        <div class="icon-text"><span>&#9989;</span> Apigee 組織が作成済みであること</div>
      </div>

      <h3>ステップ 1: Apigee リソースの一覧取得</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">Bash</span>
          <span class="code-title">Apigee ApiProxy リソースを一覧表示</span>
        </div>
        <pre><code class="language-bash"># Apigee ApiProxy リソースを一覧表示
gcloud asset list \
  --project=PROJECT_ID \
  --asset-types="apigee.googleapis.com/ApiProxy" \
  --content-type=resource</code></pre>
      </div>

      <h3>ステップ 2: Apigee リソースの検索</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">Bash</span>
          <span class="code-title">SearchAllResources で Apigee リソースを検索</span>
        </div>
        <pre><code class="language-bash"># SearchAllResources で Apigee リソースを検索
gcloud asset search-all-resources \
  --scope=projects/PROJECT_ID \
  --asset-types="apigee.googleapis.com/ApiProxy,apigee.googleapis.com/Environment"</code></pre>
      </div>

      <h3>ステップ 3: BigQuery へのエクスポート</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">Bash</span>
          <span class="code-title">Apigee リソースを BigQuery にエクスポート</span>
        </div>
        <pre><code class="language-bash"># Apigee リソースを BigQuery にエクスポート
gcloud asset export \
  --project=PROJECT_ID \
  --asset-types="apigee.googleapis.com/ApiProxy,apigee.googleapis.com/ApiProxyRevision,apigee.googleapis.com/Environment" \
  --content-type=resource \
  --bigquery-table=projects/PROJECT_ID/datasets/DATASET_ID/tables/TABLE_ID \
  --output-bigquery-force</code></pre>
      </div>

      <h3>ステップ 4: Pub/Sub フィードの作成 (変更監視)</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">Bash</span>
          <span class="code-title">Apigee リソースの変更を監視するフィードを作成</span>
        </div>
        <pre><code class="language-bash"># Apigee リソースの変更を監視するフィードを作成
gcloud asset feeds create FEED_ID \
  --project=PROJECT_ID \
  --asset-types="apigee.googleapis.com/ApiProxy,apigee.googleapis.com/Environment" \
  --content-type=resource \
  --pubsub-topic=projects/PROJECT_ID/topics/TOPIC_ID</code></pre>
      </div>
    </div>

    <!-- Merits and Demerits -->
    <div class="section">
      <h2>&#9878;&#65039; メリット・デメリット</h2>
      <div class="merit-grid">
        <div class="merit-box">
          <h4>&#9989; メリット</h4>
          <p style="font-size: 13px; font-weight: 600; color: var(--gc-on-surface); margin: 8px 0 4px;">ビジネス面</p>
          <ul>
            <li><strong>統合的なガバナンス:</strong> Apigee の API プロキシと環境を他の Google Cloud リソースと同じ管理基盤で可視化でき、組織全体のリソースガバナンスが強化される</li>
            <li><strong>コンプライアンス監査の効率化:</strong> API プロキシの変更履歴を最大 35 日間追跡でき、監査要件への対応が容易になる</li>
          </ul>
          <p style="font-size: 13px; font-weight: 600; color: var(--gc-on-surface); margin: 12px 0 4px;">技術面</p>
          <ul>
            <li><strong>リアルタイム変更検知:</strong> Pub/Sub フィードにより変更をリアルタイムに検知し、自動化パイプラインと連携可能</li>
            <li><strong>BigQuery による高度な分析:</strong> メタデータを BigQuery にエクスポートし、SQL で横断的な分析が可能</li>
            <li><strong>IAM ポリシーの横断検索:</strong> SearchAllIamPolicies で Apigee リソースの IAM ポリシーを組織横断で可視化可能</li>
          </ul>
        </div>
        <div class="demerit-box">
          <h4>&#9888;&#65039; 制約・注意点</h4>
          <p style="font-size: 13px; font-weight: 600; color: var(--gc-on-surface); margin: 8px 0 4px;">制限事項</p>
          <ul>
            <li>今回追加された 3 リソースタイプは <strong>Effective Tags に非対応</strong>。タグベースのリソース管理には利用できない</li>
            <li><strong>Analysis API</strong> (AnalyzeIamPolicy 等) では今回追加されたリソースタイプを利用できない</li>
            <li>アセットの変更履歴は<strong>最大 35 日間</strong>のみ保持</li>
          </ul>
          <p style="font-size: 13px; font-weight: 600; color: var(--gc-on-surface); margin: 12px 0 4px;">考慮すべき点</p>
          <ul>
            <li>大規模な Apigee 環境では ListAssets がタイムアウトする可能性があるため、BigQuery エクスポートを推奨</li>
            <li>既存の Instance / Organization は Analysis API 対応だが、今回追加分は非対応。用途に応じた使い分けが必要</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Use Cases -->
    <div class="section">
      <h2>&#128161; ユースケース</h2>

      <div class="usecase-card">
        <h4>&#127970; ユースケース 1: Apigee API プロキシの組織横断インベントリ管理</h4>
        <p><strong>シナリオ:</strong> 大規模組織で複数のプロジェクトにまたがる Apigee API プロキシの全体像を把握したい場合</p>
        <div class="code-block" style="margin: 12px 0 8px;">
          <div class="code-header">
            <span class="code-lang">Bash</span>
            <span class="code-title">組織全体の Apigee API プロキシを BigQuery にエクスポート</span>
          </div>
          <pre><code class="language-bash">gcloud asset export \
  --organization=ORGANIZATION_ID \
  --asset-types="apigee.googleapis.com/ApiProxy,apigee.googleapis.com/ApiProxyRevision,apigee.googleapis.com/Environment" \
  --content-type=resource \
  --bigquery-table=projects/PROJECT_ID/datasets/asset_inventory/tables/apigee_resources \
  --output-bigquery-force</code></pre>
        </div>
        <div class="effect">&#127919; <strong>効果:</strong> 組織内の全 API プロキシ、リビジョン、環境を一元的に可視化し、リソースの散在や管理漏れを防止できる</div>
      </div>

      <div class="usecase-card">
        <h4>&#128276; ユースケース 2: API プロキシの変更監視とアラート</h4>
        <p><strong>シナリオ:</strong> 本番環境の Apigee API プロキシに対する予期しない変更を検知し、即座にアラートを発行したい場合</p>
        <div class="code-block" style="margin: 12px 0 8px;">
          <div class="code-header">
            <span class="code-lang">Bash</span>
            <span class="code-title">Pub/Sub トピック作成 + フィード作成</span>
          </div>
          <pre><code class="language-bash"># Pub/Sub トピックの作成
gcloud pubsub topics create apigee-asset-changes \
  --project=PROJECT_ID

# Cloud Asset Inventory フィードの作成
gcloud asset feeds create apigee-proxy-monitor \
  --project=PROJECT_ID \
  --asset-types="apigee.googleapis.com/ApiProxy,apigee.googleapis.com/ApiProxyRevision" \
  --content-type=resource \
  --pubsub-topic=projects/PROJECT_ID/topics/apigee-asset-changes</code></pre>
        </div>
        <div class="effect">&#127919; <strong>効果:</strong> API プロキシの作成・更新・削除をリアルタイムに検知し、Cloud Functions や Cloud Run と連携した自動対応が可能になる</div>
      </div>

      <div class="usecase-card">
        <h4>&#128274; ユースケース 3: IAM ポリシーのセキュリティ監査</h4>
        <p><strong>シナリオ:</strong> Apigee リソースに設定された IAM ポリシーを監査し、過剰な権限付与がないか確認したい場合</p>
        <div class="code-block" style="margin: 12px 0 8px;">
          <div class="code-header">
            <span class="code-lang">Bash</span>
            <span class="code-title">Apigee リソースの IAM ポリシーを横断検索</span>
          </div>
          <pre><code class="language-bash">gcloud asset search-all-iam-policies \
  --scope=organizations/ORGANIZATION_ID \
  --query="policy:roles/apigee.admin" \
  --asset-types="apigee.googleapis.com/ApiProxy,apigee.googleapis.com/Environment"</code></pre>
        </div>
        <div class="effect">&#127919; <strong>効果:</strong> Apigee リソースに対する権限付与状況を組織横断で可視化し、最小権限の原則に基づいたアクセス管理を実現できる</div>
      </div>
    </div>

    <!-- Pricing -->
    <div class="section">
      <h2>&#128176; 料金</h2>
      <p>Cloud Asset Inventory の料金は、主要な API (ExportAssets、ListAssets、SearchAllResources 等) がそれぞれ API コール数に基づいた料金体系となっている。</p>
      <div class="note-box">
        <strong>&#128279; 詳細:</strong> <a href="https://cloud.google.com/asset-inventory/pricing" target="_blank" rel="noopener noreferrer" class="gc-link">Cloud Asset Inventory 料金ページ</a>
      </div>
    </div>

    <!-- Related Services -->
    <div class="section">
      <h2>&#128279; 関連サービス・機能</h2>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <div class="card" style="margin: 0;">
          <h4>&#128268; <a href="https://cloud.google.com/apigee/docs" target="_blank" class="gc-link">Apigee</a></h4>
          <p style="font-size: 13px;">Google Cloud のフルライフサイクル API 管理プラットフォーム。今回サポートされた ApiProxy、ApiProxyRevision、Environment はその中核リソース。</p>
        </div>
        <div class="card" style="margin: 0;">
          <h4>&#128451;&#65039; <a href="https://cloud.google.com/asset-inventory/docs/overview" target="_blank" class="gc-link">Cloud Asset Inventory</a></h4>
          <p style="font-size: 13px;">Google Cloud のグローバルメタデータインベントリサービス。最大 35 日間の変更履歴を保持する時系列データベースに基づく。</p>
        </div>
        <div class="card" style="margin: 0;">
          <h4>&#128202; <a href="https://cloud.google.com/bigquery/docs" target="_blank" class="gc-link">BigQuery</a></h4>
          <p style="font-size: 13px;">ExportAssets / QueryAssets を通じてアセットメタデータを格納・分析する先として連携。</p>
        </div>
        <div class="card" style="margin: 0;">
          <h4>&#128232; <a href="https://cloud.google.com/pubsub/docs" target="_blank" class="gc-link">Pub/Sub</a></h4>
          <p style="font-size: 13px;">Feed API と組み合わせてアセット変更のリアルタイム通知を実現。</p>
        </div>
        <div class="card" style="margin: 0; grid-column: span 2;">
          <h4>&#128737;&#65039; <a href="https://cloud.google.com/security-command-center/docs" target="_blank" class="gc-link">Security Command Center</a></h4>
          <p style="font-size: 13px;">Cloud Asset Inventory のデータを活用し、セキュリティ態勢の分析・改善を支援。</p>
        </div>
      </div>
    </div>

    <!-- Summary -->
    <div class="section" style="background: var(--gc-blue-tint); border: 2px solid var(--gc-blue-200);">
      <h2>&#128221; まとめ</h2>
      <p>今回のアップデートにより、Cloud Asset Inventory で Apigee の <span class="highlight">ApiProxy</span>、<span class="highlight">ApiProxyRevision</span>、<span class="highlight">Environment</span> の 3 つのリソースタイプが全主要 API で公開サポートされた。</p>
      <p style="margin-top: 10px;">これにより、既にサポートされていた Instance と Organization を含め、<strong>Apigee の主要リソースタイプ 5 種類すべて</strong>が Cloud Asset Inventory で統合管理可能となった。</p>
      <div class="success-box" style="margin-top: 16px;">
        <strong>&#128073; 推奨アクション:</strong> Apigee を利用して API 管理を行っている組織は、既存の Cloud Asset Inventory ワークフロー (BigQuery エクスポート、Pub/Sub 監視、IAM ポリシー監査など) に Apigee リソースを組み込むことを推奨する。
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p><strong>&#128206; 出典・参考リンク:</strong></p>
      <ul>
        <li><a href="https://docs.cloud.google.com/release-notes#February_10_2026" target="_blank" rel="noopener noreferrer">公式リリースノート</a></li>
        <li><a href="https://docs.cloud.google.com/asset-inventory/docs/release-notes" target="_blank" rel="noopener noreferrer">Cloud Asset Inventory リリースノート</a></li>
        <li><a href="https://docs.cloud.google.com/asset-inventory/docs/overview" target="_blank" rel="noopener noreferrer">Cloud Asset Inventory 概要</a></li>
        <li><a href="https://docs.cloud.google.com/asset-inventory/docs/asset-types" target="_blank" rel="noopener noreferrer">サポートされるアセットタイプ</a></li>
        <li><a href="https://docs.cloud.google.com/asset-inventory/docs/asset-names" target="_blank" rel="noopener noreferrer">アセット名一覧</a></li>
        <li><a href="https://docs.cloud.google.com/asset-inventory/docs/search-resources" target="_blank" rel="noopener noreferrer">リソースの検索</a></li>
        <li><a href="https://docs.cloud.google.com/asset-inventory/docs/reference/rest" target="_blank" rel="noopener noreferrer">Cloud Asset Inventory REST API リファレンス</a></li>
        <li><a href="https://docs.cloud.google.com/apigee/docs/api-platform/fundamentals/environments-overview" target="_blank" rel="noopener noreferrer">Apigee 環境の概要</a></li>
        <li><a href="https://cloud.google.com/asset-inventory/pricing" target="_blank" rel="noopener noreferrer">Cloud Asset Inventory 料金ページ</a></li>
      </ul>
      <p style="margin-top: 12px; font-size: 11px; color: var(--gc-outline);">#CloudAssetInventory #Apigee #APIManagement #AssetManagement #Governance #Security</p>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#4285F4',
        primaryTextColor: '#202124',
        primaryBorderColor: '#4285F4',
        lineColor: '#4285F4',
        secondaryColor: '#F1F3F4',
        tertiaryColor: '#FAFAFA',
        background: '#FFFFFF',
        mainBkg: '#E8F0FE',
        nodeBorder: '#4285F4',
        clusterBkg: '#E8F0FE',
        clusterBorder: '#4285F4',
        edgeLabelBackground: '#FFFFFF',
        textColor: '#202124'
      }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</body>
</html>